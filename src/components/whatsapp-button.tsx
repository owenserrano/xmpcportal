"use client";

import Link from "next/link";
import { Button } from "@/components/ui/button";
import { useEffect, useState } from "react";

function WhatsAppIcon(props: React.SVGProps<SVGSVGElement>) {
  return (
    <svg
      {...props}
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 24 24"
      fill="currentColor"
    >
      <path d="M16.75 13.96c.25.13.43.2.5.28.08.08.13.2.18.33.05.13.03.25.03.28 0 .03-.03.05-.08.13s-.18.18-.33.33c-.15.15-.35.28-.58.38-.23.1-.48.15-.73.15-.25 0-.5-.05-.73-.13s-.43-.18-.6-.3-.3-.25-.43-.38c-.13-.15-.23-.3-.3-.43s-.13-.28-.13-.4-.03-.23-.03-.33c0-.1.03-.2.08-.28s.1-.15.18-.23c.08-.08.15-.13.2-.18.1-.08.18-.13.23-.15.03-.03.05-.03.08-.03s.05 0 .08.03c.03.03.05.05.08.08s.05.08.05.13c0 .05 0 .1-.03.15s-.05.1-.08.13c-.03.03-.05.05-.08.08s-.08.05-.13.05c-.05 0-.1 0-.15-.03s-.1-.05-.15-.08c-.03-.03-.05-.05-.08-.08s-.08-.08-.1-.13c-.03-.03-.05-.08-.05-.13 0-.05-.03-.1-.03-.13s.03-.15.03-.2c0-.05.03-.1.03-.13.05-.1.1-.2.18-.3.08-.1.18-.2.28-.28.1-.08.2-.15.3-.2.1-.05.2-.08.3-.1.1-.03.2-.03.28-.03.13 0 .25.03.35.08s.2.1.28.18c.08.08.13.15.18.23.05.08.08.13.08.18.03.05.03.1.03.13s0 .13-.03.18c0 .03 0 .05-.03.08zm-5.1-3.23c-.03 0-.05.03-.08.05s-.08.05-.13.08c-.05.03-.1.08-.15.13-.05.05-.1.13-.15.2s-.1.18-.13.25c-.03.1-.05.2-.05.3s0 .2.03.28c.03.08.05.15.1.23.05.08.1.13.15.18.05.05.13.08.2.1.08.03.15.05.23.05.1 0 .2-.03.28-.05.08-.03.15-.08.2-.13.08-.05.13-.13.18-.2.05-.08.1-.15.13-.23.03-.08.05-.18.05-.28s-.03-.2-.05-.28c-.03-.08-.08-.15-.13-.23-.05-.08-.13-.13-.2-.18s-.18-.08-.28-.1c-.1-.03-.18-.03-.25-.03zm-3.53 3.53c-.03-.03-.08-.05-.13-.08s-.1-.08-.15-.13c-.05-.05-.1-.1-.13-.18s-.08-.15-.1-.23c-.03-.08-.03-.18-.03-.28s.03-.2.05-.28.08-.15.13-.23c.05-.08.1-.13.15-.18.05-.05.13-.08.2-.1.08-.03.15-.05.23-.05.1 0 .2.03.28.05.08.03.15.08.2.13.08.05.13.13.18.2.05.08.1.15.13.23.03.08.05.18.05.28s-.03.2-.05-.28c-.03-.08-.08.15-.13.23s-.13.13-.2.18c-.08.05-.15.08-.23.1-.08.03-.18.03-.25.03-.1 0-.2-.03-.28-.05s-.15-.05-.23-.1zM12 2C6.48 2 2 6.48 2 12c0 1.77.46 3.44 1.25 4.95L2 22l5.05-1.25c1.5.8 3.18 1.25 4.95 1.25s3.44-.46 4.95-1.25L22 22l-1.25-5.05c.8-1.5 1.25-3.18 1.25-4.95C22 6.48 17.52 2 12 2z"/>
    </svg>
  );
}

export function WhatsAppButton() {
  const [isClient, setIsClient] = useState(false);

  useEffect(() => {
    setIsClient(true);
  }, []);

  if (!isClient) {
    return null;
  }
  
  return (
    <Button
      asChild
      className="fixed bottom-6 left-6 h-16 w-16 rounded-full bg-green-500 text-white shadow-lg hover:bg-green-600 focus:ring-green-400"
      aria-label="Contactar por WhatsApp"
    >
      <Link href="http://wa.me/+5491166664731" target="_blank" rel="noopener noreferrer">
        <WhatsAppIcon className="h-8 w-8" />
      </Link>
    </Button>
  );
}
